java: &javavalues #This is an anchor to reuse settings in Job mode.
  enabled: true
  applicationPort: 4550
  image: 'sdshmctspublic.azurecr.io/pre/api:latest'
  ingressHost: pre-api-{{ .Values.global.environment }}.service.core-compute-{{ .Values.global.environment }}.internal
  aadIdentityName: pre
  keyVaults:
    pre-hmctskv:
      secrets:
        - name: api-POSTGRES-HOST
          alias: POSTGRES_HOST
        - name: api-POSTGRES-PORT
          alias: POSTGRES_PORT
        - name: api-POSTGRES-DATABASE
          alias: POSTGRES_DATABASE
        - name: api-POSTGRES-PASS
          alias: POSTGRES_PASSWORD
        - name: api-POSTGRES-USER
          alias: POSTGRES_USER
        - name: apim-sub-smoketest-primary-key
          alias: APIM_SUB_SMOKETEST_PRIMARY_KEY
        - name: apim-sub-smoketest-secondary-key
          alias: APIM_SUB_SMOKETEST_SECONDARY_KEY
        - name: app-insights-connection-string
        - name: api-MKIO-TOKEN
          alias: MEDIA_KIND_TOKEN
        - name: finalsa-storage-account-connection-string
          alias: AZURE_FINAL_SA_CONNECTION_STRING
        - name: ingestsa-storage-account-connection-string
          alias: AZURE_INGEST_SA_CONNECTION_STRING
        - name: vodasa-storage-account-connection-string
          alias: AZURE_VF_SA_CONNECTION_STRING
        - name: symmetrickey
          alias: SYMMETRIC_KEY
        - name: api-MK-SUBSCRIPTION-ID
          alias: MEDIA_KIND_SUBSCRIPTION_ID
        - name: api-MK-CUSTOMER-ID
          alias: MEDIA_KIND_CUSTOMER_ID
        - name: govnotify-key
          alias: GOV_NOTIFY_API_KEY
        - name: govnotify-key-test
          alias: GOV_NOTIFY_API_KEY_TEST
        - name: slack-webhook-url
          alias: SLACK_WEBHOOK_URL
        - name: slack-infobot-url
          alias: SLACK_INFOBOT_URL
  environment:
    RUN_DB_MIGRATION_ON_STARTUP: false
    APIM_ENABLED: true
    APIM_URI: https://sds-api-mgmt.platform.hmcts.net
    MEDIA_KIND_SUBSCRIPTION: "pre-mediakind-{{ .Values.global.environment }}"
    AZURE_INGEST_SA: "preingestsa{{ .Values.global.environment }}"
    AZURE_FINAL_SA: "prefinalsa{{ .Values.global.environment }}"
    AZURE_VF_SA: "prevodasa{{ .Values.global.environment }}"
    PLATFORM_ENV_TAG: Production
    CRON_USER_EMAIL: "dts-pre-app-{{ .Values.global.environment }}@hmcts.net"
    VODAFONE_MIGRATION_USER: "dts-pre-vodafone-migration@hmcts.net"
    ISSUER: https://sts.windows.net/531ff96d-0ae9-462a-8d2d-bec7c0b42082/
    EMAIL_SERVICE: GovNotify
    ENABLE_AUTOMATED_EDITING: false
    ENABLE_ENHANCED_PROCESSING: false
    ENABLE_NULL_DURATION_UPSERT: false
    ENABLE_MIGRATION_ADMIN_ENDPOINTS: false
    ENABLE_V2_B2C: false
    TASK_START_LIVE_EVENTS_BATCH_SIZE: 20
    TASK_START_LIVE_EVENTS_POLL_INTERVAL: 2000
    TASK_CLEANUP_LIVE_EVENTS_BATCH_SIZE: 3
    TASK_CLEANUP_LIVE_EVENTS_COOLDOWN: 60000
    ENABLE_MIGRATED_DATA: false
    TASK_BATCH_IMPORT_MISSING_ASSETS_BATCH_SIZE: 50
    TASK_BATCH_IMPORT_MISSING_ASSETS_POLL_INTERVAL: 10000
    TASK_BATCH_IMPORT_MISSING_ASSETS_MAX_SLEEP_TIME: "1800000"
job:
  #DO NOT DELETE, Below line is aliasing all values from Java settings above to job to avoid duplication.
  <<: *javavalues
  enabled: false
